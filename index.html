<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Daily Tasks">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="manifest" href="manifest.json">
  <title>Daily Task App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 1rem;
      background: #f7f7f7;
    }
    h1 {
      text-align: center;
      background-color: #4b7eb4;
      color: white;
      padding: 1rem;
      margin: -1rem -1rem 1rem -1rem;
    }
    #task-list h2 {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 0.5rem;
      background: #fff;
      margin-bottom: 5px;
      border-radius: 5px;
    }
    button {
      margin-top: 1rem;
    }
    input[type="text"] {
      width: 80%;
      padding: 0.5rem;
    }
    .day-nav {
      text-align: center;
      margin-bottom: 1rem;
    }
    .day-nav a {
      margin: 0 5px;
      text-decoration: none;
      color: #4b7eb4;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1 id="page-title">Daily Tasks</h1>

  <div class="day-nav">
    <a href="?day=Monday">Mon</a>
    <a href="?day=Tuesday">Tue</a>
    <a href="?day=Wednesday">Wed</a>
    <a href="?day=Thursday">Thu</a>
    <a href="?day=Friday">Fri</a>
    <a href="?day=Saturday">Sat</a>
    <a href="?day=Sunday">Sun</a>
  </div>

  <div id="task-list"></div>
  <input type="text" id="new-task" placeholder="Add new task">
  <button onclick="addTask()">Add Task</button>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const day = urlParams.get('day') || new Date().toLocaleDateString('en-US', { weekday: 'long' });
    const pageTitle = document.getElementById('page-title');
    pageTitle.textContent = `Tasks for ${day}`;

    const taskList = document.getElementById('task-list');
    const newTaskInput = document.getElementById('new-task');
    const storageKey = `tasks_${day}`;
    const dateKey = `reset_${day}`;
    const today = new Date().toLocaleDateString();

    const defaultTasks = [
      "Dream Journal",
      "Brush Teeth",
      "Take Medication",
      "Shower",
      "10 Minute Stretch",
      "Eat Breakfast",
      "5 Hour Work Day at Apple",
      "30 Minute Walk",
      "Eat Lunch",
      "Eat Dinner",
      "Family Time",
      "15 Minute House Clean Up",
      "Learn Spanish",
      "Review Email Accounts",
      "Review Social Media",
      "Strength Train",
      "Stretch",
      "Read a Chapter of a Book",
      "Journal",
      "Drink a Gallon of Water",
      "Update Planner"
    ];

    if (localStorage.getItem(dateKey) !== today) {
      const tasks = defaultTasks.map(text => ({ text, done: false }));
      saveTasks(tasks);
      localStorage.setItem(dateKey, today);
    }

    function getTasks() {
      return JSON.parse(localStorage.getItem(storageKey)) || defaultTasks.map(text => ({ text, done: false }));
    }

    function saveTasks(tasks) {
      localStorage.setItem(storageKey, JSON.stringify(tasks));
    }

    function renderTasks() {
      const tasks = getTasks();
      taskList.innerHTML = '';
      tasks.forEach((task, index) => {
        const h2 = document.createElement('h2');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = task.done;
        checkbox.onchange = () => {
          tasks[index].done = checkbox.checked;
          saveTasks(tasks);
        };
        const span = document.createElement('span');
        span.textContent = task.text;
        h2.appendChild(checkbox);
        h2.appendChild(span);
        taskList.appendChild(h2);
      });
    }

    function addTask() {
      const text = newTaskInput.value.trim();
      if (text) {
        const tasks = getTasks();
        tasks.push({ text, done: false });
        saveTasks(tasks);
        newTaskInput.value = '';
        renderTasks();
      }
    }

    renderTasks();
  </script>
</body>
</html>
