<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Daily Task App</title>
  <style>
    :root{
      --brand-purple:#845EC2;
      --brand-green:#66B032;
      --accent:#008cba;
      --yellow:#FFD966;
      --text:#222;
      --muted:#666;
      --bg:#f7f7fb;
      --card:#fff;
      --radius:14px;
      --shadow:0 6px 18px rgba(0,0,0,.06);
      --border:#e9e9f2;
    }

    /* Base */
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    .container{max-width:960px;margin:0 auto;padding:16px}

    /* Header (kept simple so main.js page-title stays fine) */
    header{background:var(--yellow);border-radius:16px;padding:16px;margin-bottom:16px;box-shadow:var(--shadow);text-align:center}
    header img{max-width:80px;display:block;margin:0 auto}
    .day-heading{margin:.3rem 0 0 0;font-weight:800}

    /* Section title */
    .section-label{text-align:center;color:var(--brand-green);font-weight:800;margin:20px 0 12px}

    /* Cards */
    .grid{display:flex;flex-wrap:wrap;gap:14px}
    .card{flex:1 1 320px;background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:14px}
    .card h2{margin:0 0 .6rem 0;color:var(--brand-purple);font-size:1.1rem}

    /* Inputs */
    textarea{width:100%;min-height:110px;border-radius:12px;border:1px solid #d9d9e3;background:#fff;font-family:inherit;padding:12px;box-sizing:border-box;margin-bottom:10px}

    /* Buttons ‚Äì modest, not oversized */
    .btn{appearance:none;border:0;border-radius:12px;padding:.65rem 1rem;background:var(--brand-purple);color:#fff;font-weight:700;cursor:pointer;box-shadow:0 8px 14px rgba(132,94,194,.2);transition:filter .2s ease,transform .06s ease}
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}
    .btn-ghost{background:#fff;color:var(--brand-purple);border:1px solid #d9d9e3;box-shadow:0 6px 12px rgba(0,0,0,.05)}
    .btn-row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .btn-block{width:100%}

    /* Mood chips */
    .mood-wrap{margin-top:6px}
    .mood-grid{display:flex;gap:10px;flex-wrap:wrap}
    .mood-chip{font-size:1.5rem;padding:.4rem .6rem;border-radius:12px;border:2px solid transparent;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.05);cursor:pointer}
    .mood-chip.active{border-color:var(--brand-purple);background:#f7f3ff}
    .mood-live{margin-top:6px;text-align:center;color:var(--muted);font-weight:600}

    /* Breathing */
    #breathing-card{text-align:center}
    #breath-bubble-wrap{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;padding:14px}
    #breath-bubble{width:150px;height:150px;border-radius:50%;background:radial-gradient(circle,#8fd7ff,var(--accent));box-shadow:0 0 14px rgba(0,140,186,.28),0 8px 20px rgba(0,0,0,.06)}
    #breath-text{font-weight:800;color:var(--accent);margin:8px 0}
    @keyframes inhaleK{from{transform:scale(1)}to{transform:scale(1.45)}}
    @keyframes exhaleK{from{transform:scale(1.45)}to{transform:scale(1)}}
    .inhale{animation:inhaleK 4s ease-in-out forwards}
    .exhale{animation:exhaleK 4s ease-in-out forwards}

    /* Progress/Tasks container */
    #task-card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:14px}
    #task-list{display:flex;flex-direction:column;gap:10px}
    .task-item{display:flex;align-items:center;gap:10px;border:1px solid var(--border);border-radius:10px;background:#fff;padding:.6rem .8rem;box-shadow:0 3px 8px rgba(0,0,0,.04)}
    .task-item input[type="checkbox"]{width:18px;height:18px;accent-color:var(--brand-green)}
    .task-item label{flex:1;font-size:1rem;font-weight:600} /* keeps normal size */

    footer{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:14px;margin:18px 0 6px;text-align:center;font-style:italic}
    @media (max-width: 768px){
      #breath-bubble{width:130px;height:130px}
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HEADER (title, weather, affirmation still set by main.js) -->
    <header>
      <img src="apple-touch-icon.png" alt="App Logo">
      <h1 id="page-title" class="day-heading"></h1>
      <div id="weather"></div>
      <div id="affirmation-box"></div>
    </header>

    <h2 class="section-label">üßò Mindfulness Zone</h2>
    <div class="grid">
      <!-- Journals -->
      <section class="card" id="journals-card">
        <h2>Journals</h2>
        <textarea id="dream-journal" placeholder="What did you dream about?"></textarea>
        <textarea id="daily-journal" placeholder="Stream your thoughts‚Ä¶"></textarea>
        <div class="btn-row">
          <button id="save-journal-btn" class="btn btn-block">Save Journals</button>
        </div>
      </section>

      <!-- Gratitude + Mood -->
      <section class="card" id="gratitude-card">
        <h2>Gratitude & Mood</h2>
        <textarea id="gratitudeEntry" placeholder="What are you grateful for today?"></textarea>

        <div class="mood-wrap">
          <h3 style="margin:6px 0 6px 0;">Your Mood</h3>
          <div class="mood-grid" role="radiogroup" aria-label="Mood picker">
            <button type="button" class="mood-chip" role="radio" aria-checked="false" data-label="Sleepy">üò™</button>
            <button type="button" class="mood-chip" role="radio" aria-checked="false" data-label="Frustrated">üò§</button>
            <button type="button" class="mood-chip" role="radio" aria-checked="false" data-label="Neutral">üòê</button>
            <button type="button" class="mood-chip" role="radio" aria-checked="false" data-label="Happy">üôÇ</button>
            <button type="button" class="mood-chip" role="radio" aria-checked="false" data-label="Joyful">üòÅ</button>
            <button type="button" class="mood-chip" role="radio" aria-checked="false" data-label="Peaceful">üòå</button>
          </div>
          <div class="mood-live">
            <span id="mood-live-text">‚Äî How do you feel?</span>
          </div>
        </div>
      </section>
    </div>

    <!-- Breathing -->
    <h2 class="section-label">ü´Å Breathing Exercise</h2>
    <section class="card" id="breathing-card">
      <div id="breath-bubble-wrap">
        <div id="breath-bubble"></div>
        <p id="breath-text">Paused</p>
        <div class="btn-row">
          <button id="breath-toggle-btn" class="btn">Start Breath</button>
        </div>
      </div>
    </section>

    <!-- Tasks -->
    <h2 class="section-label">üå± Today‚Äôs Tasks</h2>
    <section id="task-card">
      <div id="task-list"></div>
      <div class="btn-row" style="margin-top:10px;gap:10px">
        <input type="text" id="new-task" placeholder="Add new task" style="flex:1 1 260px;padding:.6rem .8rem;border-radius:10px;border:1px solid #d9d9e3;background:#fff">
        <button class="btn" onclick="addTask()">Add Task</button>
        <button class="btn-ghost btn" onclick="resetTasks()">Reset All Tasks</button>
      </div>
    </section>

    <footer><p id="quote-box">Loading quote‚Ä¶</p></footer>
  </div>

  <!-- Mood behavior -->
  <script>
    (function(){
      const chips=[...document.querySelectorAll('.mood-chip')];
      const live=document.getElementById('mood-live-text');
      function setActive(chip){
        chips.forEach(c=>{c.classList.remove('active');c.setAttribute('aria-checked','false')});
        chip.classList.add('active');
        chip.setAttribute('aria-checked','true');
        live.textContent = `${chip.textContent.trim()} ${chip.dataset.label} selected`;
      }
      chips.forEach(chip=>{
        chip.addEventListener('click',()=>setActive(chip));
        chip.addEventListener('keydown',e=>{
          if(e.key===' '||e.key==='Enter'){e.preventDefault();setActive(chip);}
        });
      });
    })();
  </script>

  <!-- Breathing: 4 / 4 / 4 / 4 with countdown; safe spacing -->
  <script>
    (function(){
      const bubble=document.getElementById('breath-bubble');
      const text=document.getElementById('breath-text');
      const btn=document.getElementById('breath-toggle-btn');

      const phases=[
        {label:'Inhale', className:'inhale', seconds:4},
        {label:'Hold',   className:'',       seconds:4},
        {label:'Exhale', className:'exhale', seconds:4},
        {label:'Hold',   className:'',       seconds:4},
      ];

      let running=false, step=0, timer=null, tickTimer=null, remaining=0;

      function updateLabel(){
        text.textContent = `${phases[step].label} for ${remaining}`;
      }
      function clearTimers(){
        if(timer){clearTimeout(timer);timer=null;}
        if(tickTimer){clearInterval(tickTimer);tickTimer=null;}
      }
      function advance(){
        clearTimers();
        bubble.className = phases[step].className;
        remaining = phases[step].seconds;
        updateLabel();
        tickTimer=setInterval(()=>{
          remaining--; 
          if(remaining>=0) updateLabel();
        },1000);
        timer=setTimeout(()=>{
          clearTimers();
          step=(step+1)%phases.length;
          advance();
        }, phases[step].seconds*1000);
      }

      btn.addEventListener('click',()=>{
        if(!running){
          running=true; btn.textContent='Stop Breath'; step=0; advance();
        }else{
          running=false; btn.textContent='Start Breath'; clearTimers(); bubble.className=''; text.textContent='Paused';
        }
      });
    })();
  </script>

  <!-- Your existing app logic (tasks, weather, quotes, etc.) -->
  <script type="module" src="main.js"></script>
</body>
</html>