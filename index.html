<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#0b0b10">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Daily Tasks">
  <link rel="manifest" href="/dailytaskapp/manifest.json">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <title>Daily Task App</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-1:#0b0b10;
      --bg-2:#12141d;
      --glow-1:#8f7ff5;
      --glow-2:#6ee7d2;
      --card: rgba(255,255,255,0.06);
      --border: rgba(255,255,255,0.08);
      --text:#e8e8f0;
      --muted:#a7a8b3;
      --brand:#845EC2;
      --accent:#00a6d6;
      --chip:#1d2030;
      --chip-on:#23263a;
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.25);
      --bubble-base: clamp(168px, 40vw, 240px);
      --bubble-max-scale: 1.28;

      --cup-w: clamp(56px, 8vw, 72px);
      --cup-h: clamp(68px, 10vw, 88px);
      --cup-svg-w: calc(var(--cup-w) * 0.82);
      --cup-svg-h: calc(var(--cup-h) * 0.68);
    }

    html, body {
      margin:0; padding:0; height:100%; width:100%;
      background: radial-gradient(1200px 1200px at 10% 10%, rgba(132,94,194,.25), transparent 60%),
                  radial-gradient(1200px 1200px at 90% 20%, rgba(102,176,50,.20), transparent 60%),
                  linear-gradient(160deg, var(--bg-1), var(--bg-2));
      color: var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
      overflow-x:hidden;
    }

    body { padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left); }
    .container { max-width: 860px; margin: 0 auto; padding: clamp(16px, 3vw, 28px); position: relative; }

    .glass {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    header { padding: 18px; margin: 0 0 16px 0; position: relative; overflow: hidden; }
    header img { width:72px; height:72px; display:block; margin: 6px auto 8px; }
    .day-heading { text-align:center; font-size:clamp(1.6rem, 2.8vw, 2.2rem); font-weight:800; }

    h2.section-label {
      text-align:center; font-size:clamp(1.2rem,2vw,1.4rem);
      color:#bfeadf; margin:28px 0 14px; font-weight:800;
    }

    /* Hydration cups */
    .hydration-row{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;}
    .cup-btn{width:var(--cup-w);height:var(--cup-h);border-radius:12px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;}
    .cup-svg{width:var(--cup-svg-w);height:var(--cup-svg-h);}
    .water{transform:scaleY(0);transform-origin:50% 100%;transition:.25s;}
    .cup-btn.filled .water{transform:scaleY(1);}
    #hydration-status{text-align:center;margin-top:.4rem;color:#cfe;font-weight:800;}

    /* Prompt Roulette */
    #prompt-box { text-align:center; margin:.8rem 0; font-weight:600; }
    #prompt-answer { width:100%; padding:.6rem; border-radius:12px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.06); color:#fff; }

    /* Moments Capture */
    .moment-grid { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin:10px 0; }
    .moment-btn { font-size:1.6rem; padding:.6rem .9rem; border-radius:12px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.08); color:#fff; cursor:pointer; }
    .moment-count { display:block; font-size:.8rem; color:#cfe; margin-top:.2rem; text-align:center; }

    /* Gratitude Bingo */
    .bingo-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
    .bingo-cell { padding:1rem; text-align:center; border-radius:12px; border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.06); cursor:pointer; }
    .bingo-cell.active { background:linear-gradient(135deg,#8f7ff5,#6ee7d2); color:#000; font-weight:700; }
  </style>
</head>
<body>
<div class="container">
  <!-- Header -->
  <header class="glass">
    <img src="apple-touch-icon.png" alt="App Logo">
    <h1 id="page-title" class="day-heading"></h1>
    <div id="weather" class="weather-content"></div>
    <div id="affirmation-box"></div>
  </header>

  <!-- Day nav -->
  <div class="day-nav">
    <a href="?day=Monday">Mon</a><a href="?day=Tuesday">Tue</a><a href="?day=Wednesday">Wed</a>
    <a href="?day=Thursday">Thu</a><a href="?day=Friday">Fri</a><a href="?day=Saturday">Sat</a><a href="?day=Sunday">Sun</a>
  </div>

  <!-- Mindfulness Zone -->
  <h2 class="section-label">ðŸ§˜ Mindfulness Zone</h2>

  <!-- Prompt Roulette -->
  <div class="glass" style="padding:16px;margin-bottom:14px;">
    <h3>ðŸŽ² Prompt Roulette</h3>
    <div id="prompt-box">Press spin to get a reflection prompt</div>
    <input id="prompt-answer" placeholder="Optional: jot a quick thought..."/>
    <div style="margin-top:.6rem;text-align:center;">
      <button id="spin-prompt" class="btn btn-primary">Spin Prompt</button>
      <button id="reset-prompt" class="btn">Reset</button>
    </div>
  </div>

  <!-- Moments Capture -->
  <div class="glass" style="padding:16px;margin-bottom:14px;">
    <h3>âœ¨ Moments Capture</h3>
    <div class="moment-grid" id="moment-grid"></div>
    <div style="text-align:center;margin-top:.6rem;">
      <button id="reset-moments" class="btn">Reset Moments</button>
    </div>
  </div>

  <!-- Gratitude Bingo -->
  <div class="glass" style="padding:16px;margin-bottom:14px;">
    <h3>ðŸ§¡ Gratitude Bingo</h3>
    <div class="bingo-grid" id="bingo-grid"></div>
    <div style="text-align:center;margin-top:.6rem;">
      <button id="reset-bingo" class="btn">Reset Bingo</button>
    </div>
  </div>

  <!-- Breathing -->
  <section id="breathing">
    <h2 class="section-label">Breathing Exercise</h2>
    <div class="glass breathing-tile">
      <div id="breath-bubble-container">
        <div id="breath-bubble"></div>
        <p id="breath-text"><span id="phase">Inhale</span> for <span id="countdown">4</span></p>
        <button id="breath-toggle-btn" class="btn btn-primary">Start Breathing Exercise</button>
      </div>
    </div>
  </section>

  <!-- Hydration -->
  <h2 class="section-label">ðŸ’§ Hydration</h2>
  <div class="glass hydration-tile" id="hydration-card">
    <div class="hydration-header">
      <strong>Cups drunk today</strong>
      <label><span style="color:#cfe;">Goal</span>
        <select id="hydration-goal">
          <option value="6">6</option><option value="8" selected>8</option>
          <option value="10">10</option><option value="12">12</option><option value="15">15</option>
        </select>
      </label>
    </div>
    <div id="hydration-row" class="hydration-row"></div>
    <div class="hydration-actions">
      <button id="cup-add" class="btn btn-primary">+ 1 cup</button>
      <button id="cup-remove" class="btn">âˆ’ 1 cup</button>
      <button id="cup-reset" class="btn">Reset Today</button>
    </div>
    <div id="hydration-status">0 / 8 cups</div>
  </div>

  <!-- Tasks -->
  <h2 class="section-label">ðŸŒ± Todayâ€™s Tasks</h2>
  <div class="glass" style="padding:16px; margin-bottom:14px;">
    <div id="progress-ring-container">
      <svg id="progress-ring" width="160" height="160">
        <defs>
          <linearGradient id="ringGrad" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#8f7ff5"></stop>
            <stop offset="100%" stop-color="#6ee7d2"></stop>
          </linearGradient>
        </defs>
        <circle stroke="rgba(255,255,255,.12)" stroke-width="14" fill="transparent" r="70" cx="80" cy="80"></circle>
        <circle id="progress-ring-bar" stroke="url(#ringGrad)" stroke-width="14" fill="transparent" r="70" cx="80" cy="80" stroke-linecap="round" stroke-dasharray="439.8" stroke-dashoffset="439.8"></circle>
      </svg>
    </div>
    <p id="progress-text">0% Complete</p>
    <div id="task-list"></div>
    <div class="task-input-group">
      <input type="text" id="new-task" placeholder="Add new task">
      <button onclick="addTask()" class="btn">Add Task</button>
      <button onclick="resetTasks()" class="btn">Reset All Tasks</button>
    </div>
  </div>

  <footer id="quote-footer" class="glass"><p id="quote-box">Loading quote...</p></footer>
</div>

<!-- Prompt/Moments/Bingo Logic -->
<script>
const prompts=["What made you smile today?","One thing you learned?","Best part of your morning?","A tiny act of kindness?"];
document.getElementById("spin-prompt").onclick=()=>{document.getElementById("prompt-box").textContent=prompts[Math.floor(Math.random()*prompts.length)]};
document.getElementById("reset-prompt").onclick=()=>{document.getElementById("prompt-box").textContent="Press spin to get a reflection prompt";document.getElementById("prompt-answer").value=""};

const moments=["ðŸŒž Morning","â˜• Coffee","ðŸš¶ Walk","ðŸŽµ Music","ðŸ’¬ Chat","ðŸ§  Focus"];
const momentGrid=document.getElementById("moment-grid");let momentCounts={};
moments.forEach(m=>{momentCounts[m]=0;const b=document.createElement("button");b.className="moment-btn";b.innerHTML=m+`<span class="moment-count">0</span>`;b.onclick=()=>{momentCounts[m]++;b.querySelector(".moment-count").textContent=momentCounts[m];};momentGrid.appendChild(b)});
document.getElementById("reset-moments").onclick=()=>{momentCounts={};momentGrid.querySelectorAll(".moment-btn").forEach(b=>b.querySelector(".moment-count").textContent="0")};

const bingoItems=["A kind person","A song","Fresh air","A small win","Cozy spot","Learned","Tasty meal","Laughed","Nature"];
const bingo=document.getElementById("bingo-grid");
bingoItems.forEach(item=>{const c=document.createElement("div");c.className="bingo-cell";c.textContent=item;c.onclick=()=>{c.classList.toggle("active");};bingo.appendChild(c)});
document.getElementById("reset-bingo").onclick=()=>{bingo.querySelectorAll(".bingo-cell").forEach(c=>c.classList.remove("active"))};
</script>

<script type="module" src="main.js"></script>
</body>
</html>
