<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#ffffff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Daily Tasks">
  <link rel="manifest" href="/dailytaskapp/manifest.json">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <title>Daily Task App</title>

  <style>
    :root {
      --primary: #845EC2;
      --success: #66B032;
      --accent: #008cba;
      --yellow: #FFD966;
      --text: #222;
      --text-light: #666;
      --bg: #fafafa;
      --card-bg: #fff;
      --radius: 14px;
      --shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 1rem;
    }

    header {
      background: var(--yellow);
      padding: 1.25rem;
      border-radius: var(--radius);
      text-align: center;
      margin-bottom: 1.5rem;
    }
    header img { width: 70px; }
    .day-heading {
      margin: 0.5rem 0;
      font-size: 1.8rem;
      font-weight: 700;
      color: #000;
    }
    .weather-content { font-size: .95rem; color: #333; }
    #affirmation-box { font-style: italic; color: var(--text-light); opacity: 0; transition: opacity .8s; }
    #affirmation-box.visible { opacity: 1; }

    .day-nav {
      display: flex; justify-content: center; gap: .5rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }
    .day-nav a {
      text-decoration: none;
      padding: .5rem .8rem;
      border-radius: 8px;
      font-weight: 600;
      color: #fff;
      background: var(--primary);
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 1rem;
      box-shadow: var(--shadow);
      margin-bottom: 1.5rem;
    }
    .card h2 {
      margin-top: 0;
      font-size: 1.1rem;
      color: var(--primary);
    }
    textarea {
      width: 100%;
      min-height: 100px;
      border-radius: 10px;
      border: 1px solid #ccc;
      padding: .75rem;
      font-family: inherit;
      font-size: 1rem;
      margin-bottom: 1rem;
    }
    .btn {
      display: inline-block;
      padding: .6rem 1rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      background: var(--primary);
      color: #fff;
    }
    .btn-secondary {
      background: var(--accent);
    }

    /* Mood Picker */
    #mood { display:none; }
    .mood-grid {
      display:flex; flex-wrap:wrap; gap:.5rem; justify-content:center;
    }
    .mood-chip {
      font-size:1.4rem;
      padding:.5rem;
      border:1px solid #ddd;
      border-radius: 8px;
      cursor:pointer;
      background:#f5f5f5;
    }
    .mood-chip[aria-checked="true"] {
      border-color: var(--primary);
      background: #eee;
    }
    .mood-live { text-align:center; margin:.5rem 0; color: var(--text-light); }

    /* Breathing */
    #breath-bubble {
      width:100px; height:100px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #8fd7ff, var(--accent));
      margin: 0 auto 1rem;
    }

    /* Progress */
    #progress-ring { transform: rotate(-90deg); }
    #progress-ring-bar { transition: stroke-dashoffset .4s ease; }
    #progress-text { text-align:center; font-weight:600; color: var(--success); }

    /* Tasks */
    .task-input-group {
      display:flex; gap:.5rem; margin-top:.75rem;
    }
    #new-task {
      flex:1; padding:.6rem; border:1px solid #ccc;
      border-radius:8px;
    }

    footer {
      text-align:center;
      margin-top: 2rem;
      padding: 1rem;
      font-style: italic;
      color: var(--text-light);
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <img src="apple-touch-icon.png" alt="App Logo">
      <h1 id="page-title" class="day-heading"></h1>
      <div id="weather" class="weather-content"></div>
      <div id="affirmation-box"></div>
    </header>

    <nav class="day-nav">
      <a href="?day=Mon">Mon</a><a href="?day=Tue">Tue</a><a href="?day=Wed">Wed</a>
      <a href="?day=Thu">Thu</a><a href="?day=Fri">Fri</a><a href="?day=Sat">Sat</a><a href="?day=Sun">Sun</a>
    </nav>

    <section id="journals" class="card">
      <h2>📝 Journals</h2>
      <textarea id="dream-journal" placeholder="Dream journal..."></textarea>
      <textarea id="daily-journal" placeholder="Daily journal..."></textarea>
      <button id="save-journal-btn" class="btn">Save Journals</button>
    </section>

    <section id="gratitude" class="card">
      <h2>🌸 Gratitude & Mood</h2>
      <textarea id="gratitudeEntry" placeholder="What are you grateful for?"></textarea>
      <div class="mood-live">
        <span id="mood-emoji">—</span> <span id="mood-label">How do you feel?</span>
      </div>
      <select id="mood">
        <option value="">How do you feel?</option>
        <option value="😀">Happy</option>
        <option value="😐">Neutral</option>
        <option value="😔">Sad</option>
        <option value="😤">Frustrated</option>
        <option value="😴">Tired</option>
        <option value="😌">Peaceful</option>
      </select>
      <div class="mood-grid">
        <button type="button" class="mood-chip" data-emoji="😀" data-label="Happy">😀</button>
        <button type="button" class="mood-chip" data-emoji="😐" data-label="Neutral">😐</button>
        <button type="button" class="mood-chip" data-emoji="😔" data-label="Sad">😔</button>
        <button type="button" class="mood-chip" data-emoji="😤" data-label="Frustrated">😤</button>
        <button type="button" class="mood-chip" data-emoji="😴" data-label="Tired">😴</button>
        <button type="button" class="mood-chip" data-emoji="😌" data-label="Peaceful">😌</button>
      </div>
    </section>

    <section id="breathing" class="card">
      <h2>🧘 Breathing</h2>
      <div id="breath-bubble"></div>
      <p id="breath-text">Inhale for <span id="countdown">4</span></p>
      <button id="breath-toggle-btn" class="btn btn-secondary">Start Breath</button>
    </section>

    <section id="progress" class="card">
      <h2>📈 Progress</h2>
      <svg id="progress-ring" width="140" height="140">
        <circle stroke="#eee" stroke-width="12" fill="transparent" r="60" cx="70" cy="70"></circle>
        <circle id="progress-ring-bar" stroke="#66B032" stroke-width="12" fill="transparent" r="60" cx="70" cy="70"
          stroke-linecap="round" stroke-dasharray="377" stroke-dashoffset="377"></circle>
      </svg>
      <p id="progress-text">0% Complete</p>
    </section>

    <section id="tasks" class="card">
      <h2>🌱 Today’s Tasks</h2>
      <div id="task-list"></div>
      <div class="task-input-group">
        <input type="text" id="new-task" placeholder="Add new task">
        <button class="btn" onclick="addTask()">Add</button>
        <button class="btn btn-secondary" onclick="resetTasks()">Reset</button>
      </div>
    </section>

    <footer>
      <p id="quote-box">Loading quote...</p>
    </footer>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
